# RecSys31

# Проблема кейса:
Банк располагает обширными данными о активности пользователей, но существующие механизмы таргетирования
используют эти данные ограниченно. Что вытекает в следующие ограничения текущих алгоритмов:
Узкий набор признаков — текущие модели строятся на ограниченном наборе
фич.
Игнорирование сложных паттернов — редкий учет комплексных поведенче-
ских моделей;
Низкая релевантность — нерелевантные рекомендации приводят к «баннер-
ной слепоте»;
Слабая конверсия — низкая эффективность кросс- и апсейлов;
Упущенные возможности — фокус на одном продукте-локомотиве вместо за-
крытия специфических потребностей;

# Цель проекта
Создать высокотехнологичную систему рекомендаций, которая персонализирует предложение банковских продуктов для клиентов на основе анализа их поведения и данных.
- Интеллектуальный подбор рекомендаций: Реализация гибридной модели, сочетающей анализ временных рядов и кластеризацию пользователей для точного прогнозирования потребностей.
- Повышение релевантности: Исключение нелогичных рекомендаций (например, на основе конфликтующих предпочтений).
- Диверсификация выдачи: Система должна рекомендовать не только наиболее подходящий продукт, но и альтернативные варианты для расширения выбора клиента.
- Аналитика клиентской базы: Формирование медианных профилей продуктов для каждого клиента и прогнозирование вероятности конверсии по каждому продукту.
- Объясняемость решений: Интеграция с Large Language Model (LLM) через API для генерации понятных текстовых пояснений к каждой рекомендации.
- Событийная архитектура: Реализация системы асинхронных уведомлений на базе платформы наподобие Apache Kafka.

# Решение
## Ваше видение решения
Решение требует учитывания сложных намерений пользователя. Рекомендации должны быть реально полезны и неочевидны.
Мы предлагаем подход по обучению модели, которая моделирует изменение намерения по покупке/использованию банковского продукта, если мы покажем эту рекомендацию.
Не имеет смысла расходовать операционные ресурсы на рекомендацию, которая ничем не поможет (пользователь и так купить продукт без нас).

Пример: 
Если человек купил машину, то предлагать ему страховку становится очевидным, с огромной вероятностью человек купит страховку самостоятельно, поэтому можно предложить скидку у магазинов-партнеров, допустим, в магазине аксессуаров для автомобиля.

## Пайплайн решения
Храним историю поведения пользователя -> генерация фич и предпроцессинг -> генерация рекомендации (label) uplift + decision layer (decision layer = бизнес правила + регулятор) -> Поведение пользователя и рекомендацию посылаем в LLM для генерации самого текста рекомендации -> показываем на клиенте.

## Технологии 
kafka
API LLM
Uplift model
PostgreSQL
....

## Минимально необходимых функций
Автоматическая формирование фичей
Рекомендация по описанному алгоритму
Формирования уведомления с помощью LLM
Показ рекомендации на клиенте (UI)

## Планы относительно последующей работы и разделения задач

Задача 1: Подготовка и фильтрация данных
- Выделение целевого перечня банковских продуктов из технического задания.
- Фильтрация и очистка основного датасета для последующей работы только с релевантными продуктами.

Задача 2: Разработка интерфейса управления (Streamlit)
- Авторизация пользователя по ID с выбором из базы данных.
- Выдача персонализированных рекомендаций с текстовым пояснением от LLM, показ уведомлений.
- Регистрация нового клиента ("холодный старт") с возможностью тестирования.
- Форма для ввода исходных анкетных данных нового клиента (как в датасете).
- Имитация банковского приложения: кнопка "История" для просмотра и ручного добавления операций с последующей перегенерацией рекомендаций.
- Панель аналитики: сравнение метрик качества моделей, визуализация медианных профилей пользователей, тестирование различных подходов.

Задача 3: Проектирование и организация данных
- Выбор и обоснование типа базы данных.
- Разработка доменной модели данных на основе предоставленного датасета.

Задача 4: Разработка серверной части (Backend)
- Проектирование и реализация безопастной микросервисной архитектуры.
- Внедрение брокера сообщений (Kafka) для обеспечения отказоустойчивости и асинхронности.
- Разработка клиентских модулей для взаимодействия с Рекомендательной системой (RecSys).
- Разработка клиентских модулей для взаимодействия с БД.
- Контейнеризация решения с использованием Docker и docker-compose для упрощения развертывания.

Задача 5: Разработка и обучение рекомендательной системы (RecSys)
Основная модель:
- Гибридная модель (Контентная фильтрация + Ранжирование).
- Фреймворки scikit-learn (или другие)
- Входные данные: матрица взаимодействий "пользователь-продукт", обогащенная историей операций (временные ряды).
- Выходные данные: Вектор вероятностей приобретения каждого продукта для конкретного пользователя.
Альтернативные модели для сравнения эффективности:
- Генерация рекомендаций с помощью LLM на основе клиентского профиля и данных о кластере.
- Коллаборативная фильтрация.
- Экспертная система на основе правил (if-else), служащая базовым бейслайном.

Задача 6: Инжиниринг признаков (Feature Engineering)
- Агументация, фича-инжиниринг

Задача 7. Настроить пайплайн для взаимодействия с LLM. Яндекс ГПТ, qwen.
